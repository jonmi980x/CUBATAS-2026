<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cubatas 2026</title>
<style>
body { font-family: system-ui, sans-serif; background: #0f172a; color: white; margin:0; padding:16px;}
h1 { text-align:center; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:12px; }
button { background:#22c55e; border:none; border-radius:16px; padding:14px; font-size:16px; font-weight:600; cursor:pointer; margin:6px 0; }
button:active { transform: scale(0.97);}
.card { background:#1e293b; border-radius:20px; padding:12px; margin-top:20px; }
.row { display:flex; justify-content:space-between; margin:6px 0; }
</style>
</head>
<body>
<h1>ğŸ¹ Cubatas 2026</h1>
<div class="grid" id="buttons"></div>
<div class="card">
<h3>ğŸ† Ranking</h3>
<div id="ranking"></div>
</div>
<div class="card">
<h3>ğŸ“‹ Historial</h3>
<div id="history"></div>
</div>
<div class="card">
<button id="reset">ğŸ”„ Reset mensual</button>
</div>

<script>
const people = ["Jonmi","Llorden","Marce","Lucho","Markitos","Boveda","Diego","Bipo"];
const data = JSON.parse(localStorage.getItem('cubatasData')) || {};
const historyData = JSON.parse(localStorage.getItem('cubatasHistory')) || [];
people.forEach(p => { if(!data[p]) data[p] = 0; });

function saveData() {
  localStorage.setItem('cubatasData', JSON.stringify(data));
  localStorage.setItem('cubatasHistory', JSON.stringify(historyData));
}

const buttonsDiv = document.getElementById('buttons');
const rankingDiv = document.getElementById('ranking');
const historyDiv = document.getElementById('history');
const resetBtn = document.getElementById('reset');

function renderButtons() {
  buttonsDiv.innerHTML = '';
  people.forEach(p => {
    const btn = document.createElement('button');
    btn.textContent = ${p} +1;
    btn.onclick = () => {
      data[p]++;
      const now = new Date().toLocaleString();
      historyData.push(${now}: ${p} +1);
      saveData();
      renderRanking();
      renderHistory();
    };
    buttonsDiv.appendChild(btn);
  });
}

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cubatas 2026 PRO Online</title>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: system-ui, sans-serif; background:#0f172a; color:white; margin:0; padding:16px;}
h1 { text-align:center; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:12px; margin-bottom:20px;}
button { background:#22c55e; border:none; border-radius:16px; padding:12px; font-size:14px; font-weight:600; cursor:pointer; margin:2px 0; }
button:active { transform: scale(0.97);}
.card { background:#1e293b; border-radius:20px; padding:12px; margin-bottom:20px; }
.row { display:flex; justify-content:space-between; margin:4px 0; }
canvas { background:#1e293b; border-radius:12px; margin-top:10px; }
</style>
</head>
<body>
<h1>ğŸ¹ Cubatas 2026 PRO Online</h1>

<div class="grid" id="buttons"></div>

<div class="card">
<h3>ğŸ† Ranking</h3>
<div id="ranking"></div>
<canvas id="chart" height="200"></canvas>
</div>

<div class="card">
<h3>ğŸ“‹ Historial</h3>
<div id="history"></div>
</div>

<div class="card">
<button id="reset">ğŸ”„ Reset mensual</button>
</div>

<script>
// ---------------------------
// CONFIGURACIÃ“N DE FIREBASE
// ---------------------------
const firebaseConfig = {
  apiKey: "AIzaSyC2O75FYQDljmMeu36yB94KbOmAZdgX4d4",
  authDomain: "cubatas-2026.firebaseapp.com",
  databaseURL: "https://cubatas-2026-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "cubatas-2026",
  storageBucket: "cubatas-2026.firebasestorage.app",
  messagingSenderId: "754889583450",
  appId: "1:754889583450:web:aa584f7a906290beffe163",
  measurementId: "G-WZGVRDT8V1"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ---------------------------
// DATOS DE LA APP
// ---------------------------
const people = ["Jonmi","Llorden","Marce","Lucho","Markitos","Boveda","Diego","Bipo","Wichi","Ferrer","Rabu"];
const drinks = [
  {name:"Cubata", points:5},
  {name:"Chupito", points:2},
  {name:"Tequila", points:3},
  {name:"CaÃ±a", points:1}
];

const buttonsDiv = document.getElementById('buttons');
const rankingDiv = document.getElementById('ranking');
const historyDiv = document.getElementById('history');
const resetBtn = document.getElementById('reset');
const chartCanvas = document.getElementById('chart');
let chart;

// ---------------------------
// FUNCIONES
// ---------------------------
people.forEach(p => {
  db.ref('points/' + p).once('value', snap => {
    if(snap.val() === null) db.ref('points/' + p).set(0);
  });
});
db.ref('history').once('value', snap => {
  if(snap.val() === null) db.ref('history').set([]);
});

function addPoints(person, drink){
  const now = new Date().toLocaleDateString();
  db.ref('points/' + person).transaction(current => (current||0) + drink.points);
  db.ref('history').transaction(current => {
    current = current || [];
    current.push(${now}: ${person} + ${drink.name} (${drink.points}p));
    if(current.length>50) current = current.slice(-50);
    return current;
  });
}

function resetPoints(){
  if(confirm('Â¿Seguro que quieres resetear este mes?')){
    people.forEach(p => db.ref('points/' + p).set(0));
    const now = new Date().toLocaleDateString();
    db.ref('history').transaction(current => {
      current = current || [];
      current.push(--- Reset mensual ${now} ---);
      if(current.length>50) current = current.slice(-50);
      return current;
    });
  }
}

function renderButtons(){
  buttonsDiv.innerHTML='';
  people.forEach(p => {
    drinks.forEach(d => {
      const btn = document.createElement('button');
      btn.textContent = ${p} + ${d.name} (${d.points}p);
      btn.onclick = () => adâ€¦